# ビルドガイド

## 資料構成

1. 紹介
    1. キット付属パーツ
    1. キット外のパーツ
    1. 組み立てに必要な工具など
1. ハードウェア作業
    1. はんだ付け
    1. ケースの工作
    1. 組み立て
1. ソフトウェア作業
    1. ProMicro
1. キーマップ設定作業

<!------------ 紹介 ------------>

## 紹介

### キット付属パーツ

<!-- あああ
[x nn]は個数

* 筐体関連の大物
    * ケース(上)  [x 1]
    * ケース(下)  [x 1]

* 筐体関連の小物
    * スライドスイッチ  [x 1]
    * スライドスイッチ穴フィラー  [x 1]
    * 支柱(短-肉有)  [x 4]
    * 支柱(短-肉抜)  [x 4]
    * 支柱(長-肉有)  [x 6]
    * 支柱(長-肉抜)  [x 6]
    * ケース(上)用ポロンシート(2mm)  [x 10]
    * 支柱用ポロンシート(3mm)  [x 20]
    * ケース用プッシュリベット(長)  [x 6]
    * ケース用ゴム足  [x 4]

* 基板関連の大物
    * PCB  [x 1]
    * プレート  [x 1]
    * MX互換スイッチソケット  [x 46]
    * ダイオード (SMDタイプ)  [x 46]

* 基板関連の小物
    * ドーターボード  [x 1]
    * ドーターボード用プッシュリベット(短)  [x 4]
    * JST SH型 4ピンコネクタ付きジャンパワイヤ  [x 1]
    * Micro USB Type-B（2.0）端子  [x 1]
    * USB Type-C端子  [x 1]
    * 13pinピンソケット  [x 2]
    * 13pinピンヘッダー  [x 2]
    * スペーサー (3.5mm)  [x 5]
    * 低頭精密小ねじ (M2/3mm)  [x 5]
    * 小ねじ (M2)  [x 5]
-->

以下のパーツはキットに付属します。

パーツをなくしてしまった場合は補修パーツの購入ページを設けますので、  
購入ショップかTwitterでご連絡ください。

| 筐体部品 | 数量 | | 電子部品 | 数量 |
|  :-  |  -:  |-|  :-  |  -:  |
| ケース(上) | 1 | | PCB  | 1 |
| ケース(下) | 1 | | プレート  | 1 |
| スライドスイッチ  | 1 | | MX互換スイッチソケット  | 46 |
| スライドスイッチ穴フィラー  | 1 | | ダイオード (SMDタイプ)  | 46 |
| 支柱(短-肉有)   | 4 | | ドーターボード  | 1 |
| 支柱(短-肉抜)   | 4 | | JST SH型 4ピンコネクタ付きジャンパワイヤ  | 1 |
| 支柱(長-肉有)   | 6 | | Micro USB Type-B（2.0）端子  | 1 |
| 支柱(長-肉抜)   | 6 | | USB Type-C端子  | 1 |
| ケース(上)用ポロンシート(2mm)  | 10 | | 13pinピンソケット  | 2 |
| 支柱用ポロンシート(3mm)  | 20 | | 13pinピンヘッダー  | 2 |
| ケース用プッシュリベット(長)  | 6 | | RST用タクタイルスイッチ  | 1 |
| ドーターボード用プッシュリベット(短)  | 4 |
| ケース用ゴム足 | 4 |
| スペーサー (3.5mm)  | 5 |
| 低頭精密小ねじ (M2/3mm)  | 5 |
| 小ねじ (M2)  | 5 |

※ 付属品の外観ならびに型番は [パーツリスト(未作成)](../README_parts/README_jp.md) を参照してください

### キット外のパーツ

以下はキーボードの動作のために必須ですが、キットには含まれていません。  
自作キーボードを扱うショップよりご購入ください。

| 品目 | 数量 |
|  :-  |  -:  |
| Pro Micro  | 1 |
| MX互換スイッチ  | 46 |
| キーキャップ  | - |
| 2U スタビライザー  | 3 または 2※ |
| USBケーブル (USB Type-C)  | 1 |

※ スタビライザーは左Shiftを分割する場合 2つ で足ります

### 組み立てに必要な工具など

組み立て時に必須の工具とあったほうがよい工具(推奨)は以下のとおりです。

| 必須         | 数量 | | 推奨                 | 数量 |
|  :-          |  -:  |-|  :-                  |  -:  |
| パソコン     | 1    | | 作業マット (A4以上)  | 1 |
| ドライバー   | -    | | 逆作用ピンセット     | 1 |
| ニッパー     | 1    | | エポキシ接着剤       | 1 |
| はんだごて   | 1    |
| はんだごて台 | 1 |
| はんだ       | - |
| マスキングテープ  | 1 |



<!------------ ハードウェア ------------>

## ハードウェア作業

### Pro Micro の破損対策 (オプション)

Pro Micro は USBケーブルの抜き差し中にマイコンボード側のコネクタの破損がまれによくあるそうなので、
コネクタを補強します。  
最初の作業がオプションとなりますが、完了までにかかる時間のほとんどが放置時間ですので、先に済ませます。

{{ 画像 }}

### はんだ付け (/6)

大変な作業から順に並べています。
2つ目が終わるとほぼ終わっています。  
<!--作者向けに作業を配信してくださると、作者が作業動画としてありがたがり、新作が進捗します。-->

#### ダイオード (SMDタイプ) (1/5)

1. 1つ目の ダイオード (SMDタイプ) を基板にはんだ付けする
    1. 部品を載せる前に、2つある■( `[■ ▷| ■]` )の片側に予備はんだを盛る  
       ※ はんだごてを持つ手側の■に盛るとよいです
    1. ダイオード (SMDタイプ) の片足を予備はんだと接合する  
       ※ ダイオードに印字されている `|` と`[■ ▷| ■]` の `▷|` を合わせてください
    1. ダイオード (SMDタイプ) が基板から浮いていないことを確認する
    1. ダイオード (SMDタイプ) の未接合の足をはんだ付けする
    1. ダイオード (SMDタイプ) が基板から浮いていないことを確認する

1. 残る45個の ダイオード (SMDタイプ) を基板にはんだ付けする
    1. 部品を載せる前に、2つあるスペースの片側に予備はんだを盛る
    1. ダイオード (SMDタイプ) の片足を予備はんだと接合する
    1. ダイオード (SMDタイプ) が基板から浮いていないことを確認する
    1. ダイオード (SMDタイプ) の未接合の足をはんだ付けする
    1. ダイオード (SMDタイプ) が基板から浮いていないことを確認する



#### MX互換スイッチソケット (2/5)

1. 1つ目の MX互換スイッチソケット を基板にはんだ付けする
    1. 部品を載せる前に、2つあるスペースの片側に予備はんだを盛る
    1. MX互換スイッチソケット の片足を予備はんだと接合する
    1. MX互換スイッチソケット が基板から浮いていないことを確認する
    1. MX互換スイッチソケット の未接合の足をはんだ付けする
    1. MX互換スイッチソケット が基板から浮いていないことを確認する

1. 残る45個の MX互換スイッチソケット を基板にはんだ付けする
    1. 部品を載せる前に、2つあるスペースの片側に予備はんだを盛る
    1. MX互換スイッチソケット の片足を予備はんだと接合する
    1. MX互換スイッチソケット が基板から浮いていないことを確認する
    1. MX互換スイッチソケット の未接合の足をはんだ付けする
    1. MX互換スイッチソケット が基板から浮いていないことを確認する

#### 13pinピンソケット と 13pinピンヘッダー (3/5)

1. 下準備
    1. 13pinピンソケット を基板にのせる x2  
       ※ 13pinピンソケット をのせる面は ダイオード と同じです
    1. 13pinピンヘッダー を1pin分カットし、12pinにする x2  
       ※ Pro Micro の代わりに MLE Micro Pro を使用する場合はカットせずに [BMP (未作成)](../) を参照してください
    1. 13pinピンヘッダー を 13pinピンソケット に差し込む x2
    1. Pro Micro を 13pinピンヘッダー にのせる
    1. マスキングテープで上記を固定する

1. 1本目の 13pinピンソケット を基板にはんだ付けする
    1. 13pinピンソケット の端の1箇所をはんだ付けする
    1. 13pinピンソケット が基板から浮いていないことを確認する
    1. 13pinピンソケット の反対端の1箇所をはんだ付けする
    1. 13pinピンソケット が基板から浮いていないことを確認する
    1. 13pinピンソケット の残りをはんだ付けする

1. 2本目の 13pinピンソケット を基板にはんだ付けする
    1. 13pinピンソケット の端の1箇所をはんだ付けする
    1. 13pinピンソケット が基板から浮いていないことを確認する
    1. 13pinピンソケット の反対端の1箇所をはんだ付けする
    1. 13pinピンソケット が基板から浮いていないことを確認する
    1. 13pinピンソケット の残りをはんだ付けする

    ※ここまでマスキングテープを剥がす必要はないはずです

1. 1本目の 13pinピンヘッダー を基板にはんだ付けする
    1. 13pinピンヘッダー の端の1箇所をはんだ付けする
    1. 13pinピンヘッダー が基板から浮いていないことを確認する
    1. 13pinピンヘッダー の反対端の1箇所をはんだ付けする
    1. 13pinピンヘッダー が基板から浮いていないことを確認する
    1. 13pinピンヘッダー の残りをはんだ付けする

1. 2本目の 13pinピンヘッダー を基板にはんだ付けする
    1. 13pinピンヘッダー の端の1箇所をはんだ付けする
    1. 13pinピンヘッダー が基板から浮いていないことを確認する
    1. 13pinピンヘッダー の反対端の1箇所をはんだ付けする
    1. 13pinピンヘッダー が基板から浮いていないことを確認する
    1. 13pinピンヘッダー の残りをはんだ付けする

1. マスキングテープを剥がして捨てる

#### RST用タクタイルスイッチ (4/5)

1. RST用タクタイルスイッチ を基板にはんだ付けする
    1. RST用タクタイルスイッチ を基板に取り付ける  
       ※ RST用タクタイルスイッチ を取り付ける面は ダイオード と同じです
    1. RST用タクタイルスイッチ が基板から浮いていないことを確認する
    1. RST用タクタイルスイッチ をはんだ付けする


#### ワイヤー (5/5)

(キーボードの利用シーンを仮にPCとしています)  
PCとキーボードの接続にて、PC と キーボードの Pro Micro をUSBケーブルで直接接続するわけではありません。  
`[PC]--[USB Type-Cケーブル]--[ドーターボード]--[JST SH型 4ピンコネクタ付きジャンパワイヤ]--[Pro Micro]` という物理的な接続となります (以下は取り出した写真) 。

{{ 画像 }}

このとき、[Pro Micro]と接続する[JST SH型 4ピンコネクタ付きジャンパワイヤ]にUSBオスコネクタが取り付けられていませんので、  
使用する Pro Micro に合わせたコネクタ と USBオスコネクタ をはんだ付けします。

* Micro USB Type-B（2.0）端子 と JST SH型 4ピンコネクタ付きジャンパワイヤ をはんだ付けする場合


* USB Type-C端子 と JST SH型 4ピンコネクタ付きジャンパワイヤ をはんだ付けする場合



#### 番外：BMP用電源パーツの取り付け (別資料)

Pro Micro の代わりに MLE Micro Pro を使用する場合は [BMP (未作成)](../) を参照してください。


### ケースの工作


### 組み立て

1. 2U スタビライザー を取り付ける

1. PCB と プレート を合体する

1. MX互換スイッチ を取り付ける

1. ドーターボード用プッシュリベット(短) を取り付ける

1. JST SH型 4ピンコネクタ付きジャンパワイヤ を接続する (ケース(下) と PCBの合体)

1. ケース(下) と ケース(上) を合体する (終)


### ハードウェア作業の終わり

以上で見た目がキーボードとなりました。  
キーボードとして使うためには Pro Micro にファームウェアが書き込まれている必要があります。  
次のソフトウェアの作業を実施してください。

<!------------ ソフトウェア ------------>

## ソフトウェア作業

### Pro Micro のファームウェア書き込み

※Pro Micro の代わりに MLE Micro Pro を使用する場合は [BMP (未作成)](../) を参照してください。

### ソフトウェア作業の終わり

以上で Pro Micro にファームウェアが書き込まれ、すでにキーボードとして認識された反応が PC で発生したものと思います。  
現在のキーボードで入力可能な文字は以下のようになっており、数字を打てないなど不便な状態となっています。

{{ 画像 }}

ファームウェアを書き込んだときと同様に、次のキーマップ設定作業を実施してください。

<!------------ ソフトウェア ------------>

## キーマップ設定作業

### remap/Google Chromeでキーマップを設定する



